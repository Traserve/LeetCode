# [69. x 的平方根](https://leetcode-cn.com/problems/sqrtx/)

实现 `int sqrt(int x)` 函数。

计算并返回 *x* 的平方根，其中 *x* 是非负整数。

由于返回类型是整数，结果只保留整数的部分，小数部分将被舍去。

**示例 1:**

```
输入: 4
输出: 2
```

**示例 2:**

```
输入: 8
输出: 2
说明: 8 的平方根是 2.82842..., 
     由于返回类型是整数，小数部分将被舍去。
```

## 思路

牛顿迭代算法

## 解法

[牛顿迭代法](https://baike.baidu.com/item/牛顿迭代法)是一种可以用来快速求解函数零点的方法。

为了叙述方便，我们用 $C$ 表示待求出平方根的那个整数。显然，$C$  的平方根就是函数
$$
y=f(x)=x 
2
 −C
$$
的零点。

牛顿迭代法的本质是借助泰勒级数，从初始值开始快速向零点逼近。我们任取一个 $x_{i}$​​​ 作为初始值，在每一步的迭代中，我们找到函数图像上的点 $(x_{i}, f(x_{i}))$​​​，过该点作一条斜率为该点导数 $f'(x_{i})$​​​ 的直线，与横轴的交点记为 $x_{i+1}$​​​。 $x_{i+1}$​​​相较于而言距离零 $x_{i}$​​​ 点更近。在经过多次迭代后，我们就可以得到一个距离零点非常接近的交点。下图给出了从 $x_{0}$​​​ 开始迭代两次，得到  $x_{1}$​​​ 和 $x_{2}$​​ ​的过程。

![fig1](https://assets.leetcode-cn.com/solution-static/69/69_fig1.png)

**算法**

我们选择 $x_{0} = C$ 作为初始值。

在每一步迭代中，我们通过当前的交点 $x_{i}$，找到函数图像上的点 $(x_{i},x_{i}^2 - C)$，作一条斜率为 $f'(x_{i}=2x_{i})$  的直线，直线的方程为：
$$
\begin{gather}
yl = 2x_{i}(x−x_{i}) + x_{i}^2 − C \\ 
= 2x_{i}x − (x_{i}^2 + C)
\end{gather}
$$
与横轴的交点为方程 $ 2x_{i}x − (x_{i}^2 + C) = 0 $​​ 的解，即为新的迭代结果 $ x_{i}+1$​​​ ：
$$
x_{i+1} = \frac{1}{2}(x_{i} + x_{i}C)
$$
在进行 $ k $ 次迭代后，$ x_{k} $ 的值与真实的零点 $ \sqrt{C}$ 足够接近，即可作为答案。
